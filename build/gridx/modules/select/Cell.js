//>>built
define("gridx/modules/select/Cell","dojo/_base/declare dojo/_base/array dojo/_base/sniff dojo/_base/event dojo/dom-class dojo/keys ./_RowCellBase ../../core/_Module".split(" "),function(m,h,n,p,l,q,r,s){return m(r,{name:"selectCell",cellMixin:{select:function(){this.grid.select.cell.selectById(this.row.id,this.column.id);return this},deselect:function(){this.grid.select.cell.deselectById(this.row.id,this.column.id);return this},isSelected:function(){return this.grid.select.cell.isSelected(this.row.id,
this.column.id)}},getSelected:function(){var a=this,c=[];h.forEach(a.grid._columns,function(b){var d=a.model.getMarkedIds(a._getMarkType(b.id));c.push.apply(c,h.map(d,function(a){return[a,b.id]}))});return c},clear:function(a){var c=this,b=c.model;c.arg("enabled")&&(h.forEach(c.grid._columns,function(d){var g=c._getMarkType(d.id),f=b.getMarkedIds(g),k=f.length,e;for(e=0;e<k;++e)(!a||a[1]!==d.id||a[0]!==f[e])&&b.markById(f[e],0,g)}),b.when())},_type:"cell",_markTypePrefix:"select_",_getMarkType:function(a){a=
this._markTypePrefix+a;this.model._spTypes[a]=1;return a},_init:function(){var a=this,c=a.grid;a.inherited(arguments);a.batchConnect([c,"onCellClick",function(b){!l.contains(b.target,"gridxTreeExpandoIcon")&&!l.contains(b.target,"gridxTreeExpandoInner")&&a._select([b.rowId,b.columnId],c._isCopyEvent(b))}],[c,4>n("ff")?"onCellKeyUp":"onCellKeyDown",function(b){if(b.keyCode==q.SPACE&&(!c.focus||"body"==c.focus.currentArea()))a._select([b.rowId,b.columnId],c._isCopyEvent(b)),p.stop(b)}])},_isSelected:function(a){return this.isSelected(a[0],
a[1])},_onMark:function(a,c,b,d){0===d.indexOf(this._markTypePrefix)&&(b=d.substr(this._markTypePrefix.length),this.grid._columnsById[b]&&(this._highlight(a,b,c),this[c?"onSelected":"onDeselected"](this.grid.cell(a,b,1),a,b),this._onSelectionChange()))},_highlight:function(a,c,b){if(a=this.grid.body.getCellNode({rowId:a,colId:c}))l.toggle(a,"gridxCellSelected",b),a.setAttribute("aria-selected",!!b),this.onHighlightChange()},_markById:function(a,c){var b=this.model;b.markById(a[0],c,this._getMarkType(a[1]));
b.when()},_onRender:function(a,c){var b=this.model,d=a+c,g,f,k,e,h=this.grid._columns;for(g=a;g<d;++g){k=b.indexToId(g);for(f=h.length-1;0<=f;--f)e=h[f].id,b.getMark(k,this._getMarkType(e))&&this._highlight(k,e,1)}}})});
//@ sourceMappingURL=Cell.js.map