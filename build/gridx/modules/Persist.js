//>>built
define("gridx/modules/Persist","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/json dojo/_base/unload dojo/cookie ../core/_Module".split(" "),function(n,g,h,l,p,k,q){return n(q,{name:"persist",constructor:function(a){var b=this,c=a.destroy;b.arg("key",window.location+"/"+a.id,function(a){return a});b._persistedList={};a.destroy=function(){b.save();c.call(a)};b._restoreColumnState();p.addOnWindowUnload(function(){b.save()})},enabled:!0,options:null,key:"",put:function(a,b,c){b&&h.isObject(b)?
k(a,l.toJson(b),c):k(a,null,{expires:-1})},get:function(a){return l.fromJson(k(a))},registerAndLoad:function(a,b,c){this._persistedList[a]={saver:b,scope:c,enabled:!0};return(b=this.arg("get")(this.arg("key")))?b[a]:null},features:function(){var a=this._persistedList,b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},enable:function(a){this._setEnable(a,1)},disable:function(a){this._setEnable(a,0)},isEnabled:function(a){var b=this._persistedList[a];return b?b.enabled:a?!1:this.arg("enabled")},
save:function(){var a=null,b=this.arg("put");if(this.arg("enabled")){var c,d,m=this._persistedList,a={};for(c in m)d=m[c],d.enabled&&(a[c]=d.saver.call(d.scope||h.global))}b(this.arg("key"),a,this.arg("options"))},_setEnable:function(a,b){var c=this._persistedList;b=!!b;if(c[a])c[a].enabled=b;else if(!a){for(a in c)c[a].enabled=b;this.enabled=b}},_restoreColumnState:function(){var a=this.grid,b={},c=this.registerAndLoad("column",this._columnStateSaver,this);h.isArray(c)&&(g.forEach(c,function(a){b[a.id]=
a}),g.forEach(a._columns,function(a){var c=b[a.id];c&&c.id==a.id&&(a.declaredWidth=a.width=c.width)}),a._columns.sort(function(a,c){var e=b[a.id],f=b[c.id];return e&&f?e.index-f.index:!e&&f?1:e&&!f?-1:a.index-c.index}),a.setColumns(a._columns))},_columnStateSaver:function(){return g.map(this.grid._columns,function(a){return{id:a.id,index:a.index,width:a.width}})}})});
//@ sourceMappingURL=Persist.js.map