//>>built
define("gridx/modules/dnd/Column","dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-class dojo/query ./_Base ../../core/_Module".split(" "),function(v,m,q,w,g,x,y){return v(x,{name:"dndColumn",required:["_dnd","selectColumn","moveColumn"],getAPIPath:function(){return{dnd:{column:this}}},preload:function(){var b=this.grid;this.inherited(arguments);this._selector=b.select.column;this.connect(b.header,"onRender","_initHeader")},load:function(){this._initHeader();this.loaded.callback()},
accept:[],provide:["grid/columns"],_checkDndReady:function(b){return this._selector.isSelected(b.columnId)?(this._selectedColIds=this._selector.getSelected(),this.grid.dnd._dnd.profile=this,!0):!1},onDraggedOut:function(){},_cssName:"Column",_initHeader:function(){g(".gridxCell",this.grid.header.domNode).attr("aria-grabbed","false")},_onBeginDnd:function(b){var c=this;b.delay=c.arg("delay");m.forEach(c._selectedColIds,function(b){g('[colid\x3d"'+c.grid._escapeId(b)+'"].gridxCell',c.grid.header.domNode).attr("aria-grabbed",
"true")})},_getDndCount:function(){return this._selectedColIds.length},_onEndDnd:function(){g('[aria-grabbed\x3d"true"].gridxCell',this.grid.header.domNode).attr("aria-grabbed","false")},_buildDndNodes:function(){var b=this.grid.id;return m.map(this._selectedColIds,function(c){return["\x3cdiv id\x3d'",b,"_dndcolumn_",c,"' gridid\x3d'",b,"' columnid\x3d'",c,"'\x3e\x3c/div\x3e"].join("")}).join("")},_onBeginAutoScroll:function(){this.grid.autoScroll.vertical=!1},_onEndAutoScroll:function(){this.grid.autoScroll.vertical=
!0},_getItemData:function(b){return b.substring((this.grid.id+"_dndcolumn_").length)},_calcTargetAnchorPos:function(b,c){for(var a=b.target,e=this,h=e.grid,m=h.isLeftToRight(),k=h._columns,n={height:c.h+"px",width:"",top:""},s=h._escapeId,t=function(a){var p=a.getAttribute("colid"),f=h._columnsById[p].index,d=a,r=a,l=a=f;if(e._selector.isSelected(p)){for(a=f;0<a&&e._selector.isSelected(k[a-1].id);)--a;d=g(".gridxHeaderRow [colid\x3d'"+s(k[a].id)+"']",h.headerNode)[0];for(l=f;l<k.length-1&&e._selector.isSelected(k[l+
1].id);)++l;r=g(".gridxHeaderRow [colid\x3d'"+s(k[l].id)+"']",h.headerNode)[0]}d&&r?(p=q.position(d),f=q.position(r),d=b.clientX<(p.x+f.x+f.w)/2,n.left=d?p.x-c.x-1+"px":f.x+f.w-c.x-1+"px",e._target=d^m?l+1:a):delete e._target;return n};a;){if(w.contains(a,"gridxCell"))return t(a);a=a.parentNode}var u=g(".gridxRow",h.bodyNode)[0],d=q.position(u.firstChild);if(d.x+d.w<=b.clientX)n.left=d.x+d.w-c.x-1+"px",e._target=k.length;else if(d.x>=b.clientX)n.left=d.x-c.x-1+"px",e._target=0;else if(g(".gridxCell",
u).some(function(c){var d=q.position(c);if(d.x<=b.clientX&&d.x+d.w>=b.clientX)return a=c,!0}))return t(a);return n},_onDropInternal:function(b,c){var a=this;if(0<=a._target){var e=m.map(a._selectedColIds,function(b){return a.grid._columnsById[b].index});a.grid.move.column.move(e,a._target)}},_onDropExternal:function(){}})});
//@ sourceMappingURL=Column.js.map