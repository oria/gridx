<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>gridx.core.model.Model</title>
  <link rel="stylesheet" href="../../../css/dojo.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/jsdoc.css" type="text/css" />
  <link rel="stylesheet" href="../../../themes/dtk/dtk.css" type="text/css" />
  </head>
<body>
    <div style="width: 100%; height: 100%;">
      <div id="treeHeader" region="top">
        gridx
      </div>
      <div region="bottom" style="height:18px;background-color:#f2f2f2;border-top:1px solid #dedede;padding:0 2px 4px 48px;position:relative;overflow:hidden;">
        <span style="position:absolute;top:3px;left:3px;font-size:small;">Legend: </span>
        <img src="../../../css/icons/16x16/array.png" align="middle" title="Array" alt="Array" border="0" />
        <img src="../../../css/icons/16x16/boolean.png" align="middle" title="Boolean" alt="Boolean" border="0" />
        <img src="../../../css/icons/16x16/constructor.png" align="middle" title="Constructor" alt="Constructor" border="0" />
        <img src="../../../css/icons/16x16/date.png" align="middle" title="Date" alt="Date" border="0" />
        <img src="../../../css/icons/16x16/domnode.png" align="middle" title="DomNode" alt="DomNode" border="0" />
        <img src="../../../css/icons/16x16/error.png" align="middle" title="Error" alt="Error" border="0" />
        <img src="../../../css/icons/16x16/function.png" align="middle" title="Function" alt="Function" border="0" />
        <img src="../../../css/icons/16x16/namespace.png" align="middle" title="Namespace" alt="Namespace" border="0" />
        <img src="../../../css/icons/16x16/number.png" align="middle" title="Number" alt="Number" border="0" />
        <img src="../../../css/icons/16x16/object.png" align="middle" title="Object" alt="Object" border="0" />
        <img src="../../../css/icons/16x16/regexp.png" align="middle" title="RegExp" alt="RegExp" border="0" />
        <img src="../../../css/icons/16x16/singleton.png" align="middle" title="Singleton" alt="Singleton" border="0" />
        <img src="../../../css/icons/16x16/string.png" align="middle" title="String" alt="String" border="0" />
      </div>
      <div region="center">
       <div class="sidebar unit size1of4 lastUnit infoCenterHeader" >
         <div class="apisidebar">
           <div class="apisidebarwrapper">
             <!-- NAVIGATION -->
           </div>
         </div>
       </div>
       <div role="main" class="main-content">
        <div class="unit size3of4 firstUnit">
          <a name="skip-navbar_top"></a>
          <div class="jsdoc-permalink" style="display:none;">../../../gridx/core/model/Model.html</div><h1 class="jsdoc-title constructorIcon36">gridx.core.model.Model</h1><div class="jsdoc-prototype">Object &raquo; gridx.core.model.Model</div><div class="jsdoc-require">dojo.require("gridx.core.model.Model");</div><div class="jsdoc-prototype">Defined in gridx/core/model/Model.js</div><div class="jsdoc-full-summary"><p>It provides a clean and useful set of APIs to encapsulate complicated data operations,
even for huge asynchronous (server side) data stores.
It is built upon a simple extension mechanism, allowing new (even user defined) data operaions to be pluged in.
An instance of this class can be regarded as a stand-alone logic grid providing consistent data processing
functionalities. This class can even be instanticated alone without any grid UI.</p>
</div><div class="jsdoc-children"><div class="jsdoc-field-list"><h2 class="jsdoc-summary-heading">Method Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon private  even"><a class="inline-link" href="#_addCmd">_addCmd</a><span class="parameters">(args)</span></li><li class="functionIcon private  odd"><a class="inline-link" href="#_cmdRequest">_cmdRequest</a><span class="parameters">()</span></li><li class="functionIcon private  even"><a class="inline-link" href="#_createExts">_createExts</a><span class="parameters">(exts, args)</span></li><li class="functionIcon private  odd"><a class="inline-link" href="#_exec">_exec</a><span class="parameters">()</span></li><li class="functionIcon private  even"><a class="inline-link" href="#_execEvents">_execEvents</a><span class="parameters">(scope, callback)</span></li><li class="functionIcon private  odd"><a class="inline-link" href="#_msg">_msg</a><span class="parameters">()</span></li><li class="functionIcon private  even"><a class="inline-link" href="#_normArgs">_normArgs</a><span class="parameters">(args)</span></li><li class="functionIcon private  odd"><a class="inline-link" href="#_onSizeChange">_onSizeChange</a><span class="parameters">()</span></li><li class="functionIcon public  even"><a class="inline-link" href="#byId">byId</a><span class="parameters">(id)</span><span class="jsdoc-returns"> returns gridx.core.model.__RowCache</span> <span>Get the row cache by row id</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#byIndex">byIndex</a><span class="parameters">(index, parentId)</span><span class="jsdoc-returns"> returns gridx.core.model.__RowCache</span> <span>Get the row cache by row index.</span></li><li class="functionIcon public  even"><a class="inline-link" href="#children">children</a><span class="parameters">(id)</span><span class="jsdoc-returns"> returns Array</span> <span>Get IDs of children rows.</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#clearCache">clearCache</a><span class="parameters">()</span></li><li class="functionIcon public  even"><a class="inline-link" href="#constructor">constructor</a><span class="parameters">(args)</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#destroy">destroy</a><span class="parameters">()</span></li><li class="functionIcon public  even"><a class="inline-link" href="#free">free</a><span class="parameters">(id)</span> <span>Unlock a row cache in memory, so that it could be cleared out when cache size is reached.</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#hasChildren">hasChildren</a><span class="parameters">(id)</span><span class="jsdoc-returns"> returns Boolean</span> <span>Check whether a row has children rows.</span></li><li class="functionIcon public  even"><a class="inline-link" href="#idToIndex">idToIndex</a><span class="parameters">(id)</span><span class="jsdoc-returns"> returns Integer</span> <span>Transform row ID to row index</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#indexToId">indexToId</a><span class="parameters">(index, parentId)</span><span class="jsdoc-returns"> returns String</span> <span>Transform row index to row ID</span></li><li class="functionIcon public  even"><a class="inline-link" href="#isId">isId</a><span class="parameters">(id)</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#keep">keep</a><span class="parameters">(id)</span> <span>Lock up a row cache in memory, avoid clearing it out when cache size is reached.</span></li><li class="functionIcon public  even"><a class="inline-link" href="#parent">parent</a><span class="parameters">(id)</span> <span>Get the parent ID of the given row.</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#scan">scan</a><span class="parameters">(args, callback)</span><span class="jsdoc-returns"> returns dojo.Deferred</span> <span>Go through all the rows in several batches from start to end (or according to given args),
	and execute the callback function for every batch of rows.</span></li><li class="functionIcon public  even"><a class="inline-link" href="#setStore">setStore</a><span class="parameters">(store)</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#size">size</a><span class="parameters">(parentId)</span><span class="jsdoc-returns"> returns Integer</span> <span>Get the count of rows under the given parent.</span></li><li class="functionIcon public  even"><a class="inline-link" href="#treePath">treePath</a><span class="parameters">(id)</span><span class="jsdoc-returns"> returns String[]</span> <span>Get tree path of row by row ID</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#when">when</a><span class="parameters">(args, callback, scope)</span><span class="jsdoc-returns"> returns dojo.Deferred</span> <span>Call this method to make sure all the pending data operations are executed and
	all the needed rows are at client side.</span></li></ul></div><h2 class="jsdoc-summary-heading">Event Summary <span class="jsdoc-summary-toggle"></span></h2><div class="jsdoc-summary-list"><ul><li class="functionIcon public  even"><a class="inline-link" href="#onDelete">onDelete</a><span class="parameters">()</span> <span>Fired when a row is deleted from store</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#onNew">onNew</a><span class="parameters">()</span> <span>Fired when a row is added to the store</span></li><li class="functionIcon public  even"><a class="inline-link" href="#onSet">onSet</a><span class="parameters">()</span> <span>Fired when a row's data is changed</span></li><li class="functionIcon public  odd"><a class="inline-link" href="#onSizeChange">onSizeChange</a><span class="parameters">()</span> <span>Fired when the size of the grid model is changed</span></li></ul></div></div></div><div class="jsdoc-children"><div class="jsdoc-fields"><h2>Methods</h2><div class="jsdoc-field private  even"><div class="jsdoc-title"><a name="_addCmd"></a><span class="functionIcon">_addCmd</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">args</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private  odd"><div class="jsdoc-title"><a name="_cmdRequest"></a><span class="functionIcon">_cmdRequest</span></div></div><div class="jsdoc-field private  even"><div class="jsdoc-title"><a name="_createExts"></a><span class="functionIcon">_createExts</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">exts</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">args</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private  odd"><div class="jsdoc-title"><a name="_exec"></a><span class="functionIcon">_exec</span></div></div><div class="jsdoc-field private  even"><div class="jsdoc-title"><a name="_execEvents"></a><span class="functionIcon">_execEvents</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">scope</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr><tr><td class="jsdoc-param-name">callback</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private  odd"><div class="jsdoc-title"><a name="_msg"></a><span class="functionIcon">_msg</span></div></div><div class="jsdoc-field private  even"><div class="jsdoc-title"><a name="_normArgs"></a><span class="functionIcon">_normArgs</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">args</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field private  odd"><div class="jsdoc-title"><a name="_onSizeChange"></a><span class="functionIcon">_onSizeChange</span></div></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="byId"></a><span class="functionIcon">byId</span></div><div class="jsdoc-return-type">Returns <strong>gridx.core.model.__RowCache</strong>: <span class="jsdoc-return-description">The row cache</span></div><div class="jsdoc-summary">Get the row cache by row id</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="byIndex"></a><span class="functionIcon">byIndex</span></div><div class="jsdoc-return-type">Returns <strong>gridx.core.model.__RowCache</strong>: <span class="jsdoc-return-description">The row cache</span></div><div class="jsdoc-summary">Get the row cache by row index.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">index</td><td class="jsdoc-param-type">Integer</td><td class="jsdoc-param-description">The row index</td></tr><tr><td class="jsdoc-param-name">parentId</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>If parentId is valid, the row index means the child index under this parent.</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="children"></a><span class="functionIcon">children</span></div><div class="jsdoc-return-type">Returns <strong>Array</strong>: <span class="jsdoc-return-description">An array of row IDs</span></div><div class="jsdoc-summary">Get IDs of children rows.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="clearCache"></a><span class="functionIcon">clearCache</span></div></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="constructor"></a><span class="functionIcon">constructor</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">args</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="destroy"></a><span class="functionIcon">destroy</span></div></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="free"></a><span class="functionIcon">free</span></div><div class="jsdoc-summary">Unlock a row cache in memory, so that it could be cleared out when cache size is reached.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>The row ID. If omitted, all kept rows will be freed.</td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="hasChildren"></a><span class="functionIcon">hasChildren</span></div><div class="jsdoc-return-type">Returns <strong>Boolean</strong>: <span class="jsdoc-return-description">Whether this row has child rows.</span></div><div class="jsdoc-summary">Check whether a row has children rows.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="idToIndex"></a><span class="functionIcon">idToIndex</span></div><div class="jsdoc-return-type">Returns <strong>Integer</strong>: <span class="jsdoc-return-description">The row index</span></div><div class="jsdoc-summary">Transform row ID to row index</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="indexToId"></a><span class="functionIcon">indexToId</span></div><div class="jsdoc-return-type">Returns <strong>String</strong>: <span class="jsdoc-return-description">The row ID</span></div><div class="jsdoc-summary">Transform row index to row ID</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">index</td><td class="jsdoc-param-type">Integer</td><td class="jsdoc-param-description">The row index</td></tr><tr><td class="jsdoc-param-name">parentId</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>If parentId is valid, the row index means the child index under this parent.</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="isId"></a><span class="functionIcon">isId</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="keep"></a><span class="functionIcon">keep</span></div><div class="jsdoc-summary">Lock up a row cache in memory, avoid clearing it out when cache size is reached.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="parent"></a><span class="functionIcon">parent</span></div><div class="jsdoc-return-type"><div class="jsdoc-return-description">The parent ID.</div></div><div class="jsdoc-summary">Get the parent ID of the given row.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="scan"></a><span class="functionIcon">scan</span></div><div class="jsdoc-return-type">Returns <strong>dojo.Deferred</strong>: <span class="jsdoc-return-description">If return true in this function, the scan process will end immediately.</span></div><div class="jsdoc-summary">Go through all the rows in several batches from start to end (or according to given args),
	and execute the callback function for every batch of rows.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">args</td><td class="jsdoc-param-type">Object</td><td class="jsdoc-param-description">An object containing scan arguments</td></tr><tr><td class="jsdoc-param-name">callback</td><td class="jsdoc-param-type">Function(rows,startIndex)</td><td class="jsdoc-param-description">The callback function.</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="setStore"></a><span class="functionIcon">setStore</span></div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">store</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="size"></a><span class="functionIcon">size</span></div><div class="jsdoc-return-type">Returns <strong>Integer</strong>: <span class="jsdoc-return-description">The count of (child) rows</span></div><div class="jsdoc-summary">Get the count of rows under the given parent.</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">parentId</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>The ID of a parent row. No parentId means root rows.</td></tr></table></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="treePath"></a><span class="functionIcon">treePath</span></div><div class="jsdoc-return-type">Returns <strong>String[]</strong>: <span class="jsdoc-return-description">An array of parent row IDs, from root to parent.
	Root level rows have parent of id ""(empty string).</span></div><div class="jsdoc-summary">Get tree path of row by row ID</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">id</td><td class="jsdoc-param-type">String</td><td class="jsdoc-param-description">The row ID</td></tr></table></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="when"></a><span class="functionIcon">when</span></div><div class="jsdoc-return-type">Returns <strong>dojo.Deferred</strong>: <span class="jsdoc-return-description">A Deferred object indicating when all this process is finished. Note that in this Deferred object,
	The needed rows might not be available since they might be cleared up to reduce memory usage.</span></div><div class="jsdoc-summary"><p>This method makes it convenient to do various grid operations without worrying too much about server side
or client side store. This method is the only asynchronous public method in grid model, so that most of
the custom code can be written in synchronous way.</p>
</div><table class="jsdoc-parameters"><tr><th>Parameter</th><th>Type</th><th>Description</th></tr><tr><td class="jsdoc-param-name">args</td><td class="jsdoc-param-type">Object|null</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>Indicate what rows are needed by listing row IDs or row indexes.
	Acceptable args include:
	1. A single row index.
	e.g.: model.when(1, ...)
	2. A single row index range object in form of: {start: ..., count: ...}.
	If count is omitted, means all remaining rows.
	e.g.: model.when({start: 10, count: 100}, ...)
	3. An array of row indexes and row index ranges.
	e.g.: model.when([0, 1, {start: 10, count: 3}, 100], ...)
	4. An object with property &quot;index&quot; set to the array defined in 3.
	e.g.: model.when({
	index: [0, 1, {start: 10, count: 3}, 100]
	}, ...)
	5. An object with property &quot;id&quot; set to an array of row IDs.
	e.g.: model.when({
	id: ['a', 'b', 'c']
	}, ...)
	6. An object containing both contents defined in 4 and 5.
	7. An empty object
	The model will fetch the store size. Currently it is implemented by fetching the first page of data.
	8. null or call this method without any arguments.
	This is useful when we only need to execute pending data operations but don't need to fetch rows.</td></tr><tr><td class="jsdoc-param-name">callback</td><td class="jsdoc-param-type">Function</td><td class="jsdoc-param-description"><div><em>Optional.</em></div>The callback function is called when all the pending data operations are executed and all</td></tr><tr><td class="jsdoc-param-name">scope</td><td class="jsdoc-param-type"></td><td class="jsdoc-param-description"></td></tr></table></div><h2>Events</h2><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="onDelete"></a><span class="functionIcon">onDelete</span></div><div class="jsdoc-summary">Fired when a row is deleted from store</div></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="onNew"></a><span class="functionIcon">onNew</span></div><div class="jsdoc-summary">Fired when a row is added to the store</div></div><div class="jsdoc-field public  even"><div class="jsdoc-title"><a name="onSet"></a><span class="functionIcon">onSet</span></div><div class="jsdoc-summary">Fired when a row's data is changed</div></div><div class="jsdoc-field public  odd"><div class="jsdoc-title"><a name="onSizeChange"></a><span class="functionIcon">onSizeChange</span></div><div class="jsdoc-summary">Fired when the size of the grid model is changed</div></div></div></div>
        </div>
       </div>
      </div>
  </div>
</body>
</html>
