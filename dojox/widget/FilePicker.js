//>>built
define("dojox/widget/FilePicker",["dijit","dojo","dojox","dojo/i18n!dojox/widget/nls/FilePicker","dojo/require!dojox/widget/RollingList,dojo/i18n"],function(f,d,e){d.provide("dojox.widget.FilePicker");d.require("dojox.widget.RollingList");d.require("dojo.i18n");d.requireLocalization("dojox.widget","FilePicker");d.declare("dojox.widget._FileInfoPane",[e.widget._RollingListPane],{templateString:"",templateString:d.cache("dojox.widget","FilePicker/_FileInfoPane.html",'<div class="dojoxFileInfoPane">\r\n\t<table>\r\n\t\t<tbody>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="dojoxFileInfoLabel dojoxFileInfoNameLabel">${_messages.name}</td>\r\n\t\t\t\t<td class="dojoxFileInfoName" dojoAttachPoint="nameNode"></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="dojoxFileInfoLabel dojoxFileInfoPathLabel">${_messages.path}</td>\r\n\t\t\t\t<td class="dojoxFileInfoPath" dojoAttachPoint="pathNode"></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="dojoxFileInfoLabel dojoxFileInfoSizeLabel">${_messages.size}</td>\r\n\t\t\t\t<td class="dojoxFileInfoSize" dojoAttachPoint="sizeNode"></td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t<div dojoAttachPoint="containerNode" style="display:none;"></div>\r\n</div>'),
postMixInProperties:function(){this._messages=d.i18n.getLocalization("dojox.widget","FilePicker",this.lang);this.inherited(arguments)},onItems:function(){var a=this.store,b=this.items[0];b?(this.nameNode.innerHTML=a.getLabel(b),this.pathNode.innerHTML=a.getIdentity(b),this.sizeNode.innerHTML=a.getValue(b,"size"),this.parentWidget.scrollIntoView(this),this.inherited(arguments)):this._onError("Load",Error("No item defined"))}});d.declare("dojox.widget.FilePicker",e.widget.RollingList,{className:"dojoxFilePicker",
pathSeparator:"",topDir:"",parentAttr:"parentDir",pathAttr:"path",preloadItems:50,selectDirectories:!0,selectFiles:!0,_itemsMatch:function(a,b){if(!a&&!b)return!0;if(a&&b){if(a==b)return!0;if(this._isIdentity){var c=[this.store.getIdentity(a),this.store.getIdentity(b)];d.forEach(c,function(a,b){a.lastIndexOf(this.pathSeparator)==a.length-1&&(c[b]=a.substring(0,a.length-1))},this);return c[0]==c[1]}}return!1},startup:function(){if(!this._started){this.inherited(arguments);var a,b=this.getChildren()[0],
c=d.hitch(this,function(){a&&this.disconnect(a);delete a;var c=b.items[0];if(c){var d=this.store,e=d.getValue(c,this.parentAttr),c=d.getValue(c,this.pathAttr);this.pathSeparator=this.pathSeparator||d.pathSeparator;if(!this.pathSeparator)this.pathSeparator=c.substring(e.length,e.length+1);if(!this.topDir)this.topDir=e,this.topDir.lastIndexOf(this.pathSeparator)!=this.topDir.length-1&&(this.topDir+=this.pathSeparator)}});if(!this.pathSeparator||!this.topDir)b.items?c():a=this.connect(b,"onItems",c)}},
getChildItems:function(a){var b=this.inherited(arguments);!b&&this.store.getValue(a,"directory")&&(b=[]);return b},getMenuItemForItem:function(a){var b={iconClass:"dojoxDirectoryItemIcon"};if(!this.store.getValue(a,"directory")){b.iconClass="dojoxFileItemIcon";var a=this.store.getLabel(a),c=a.lastIndexOf(".");0<=c&&(b.iconClass+=" dojoxFileItemIcon_"+a.substring(c+1));if(!this.selectFiles)b.disabled=!0}return new f.MenuItem(b)},getPaneForItem:function(a){var b=null;!a||this.store.isItem(a)&&this.store.getValue(a,
"directory")?b=new e.widget._RollingListGroupPane({}):this.store.isItem(a)&&!this.store.getValue(a,"directory")&&(b=new e.widget._FileInfoPane({}));return b},_setPathValueAttr:function(a,b,c){a?(a.lastIndexOf(this.pathSeparator)==a.length-1&&(a=a.substring(0,a.length-1)),this.store.fetchItemByIdentity({identity:a,onItem:function(a){if(b)this._lastExecutedValue=a;this.set("value",a);c&&c()},scope:this})):this.set("value",null)},_getPathValueAttr:function(a){if(!a)a=this.value;return a&&this.store.isItem(a)?
this.store.getValue(a,this.pathAttr):""},_setValue:function(a){delete this._setInProgress;var b=this.store;if(a&&b.isItem(a)){if((b=this.store.getValue(a,"directory"))&&!this.selectDirectories||!b&&!this.selectFiles)return}else a=null;if(!this._itemsMatch(this.value,a))this.value=a,this._onChange(a)}})});